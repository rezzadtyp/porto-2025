---
import "../styles/global.css";
---

<main
  id="main-content"
  class="w-full min-h-screen flex flex-col items-center justify-center px-4 bg-[#f3f3f3] font-mono"
>
  <div id="text-content" class="max-w-xl w-full content-wrapper">
    <p class="text-gray-500 text-base mb-2">
      Hey üëã, I‚Äôm
      <span class="text-blue-600 font-semibold">@rezzaaditya or zach</span>
			(cooler tho.)
    </p>
    <p class="text-gray-700 text-lg mb-4">
      Full Stack Web Dev, blockchain enjoyer, and always up for new tech stuff.
    </p>
    <p class="text-gray-500 text-base mb-2">
      Based in
      <a
        href="https://www.google.com/search?q=jakarta"
        target="_blank"
        rel="noreferrer"
        class="text-blue-600 hover:underline">Jakarta</a
      >
      {"<>"} local time: <span id="local-time" class="text-blue-600"></span>
    </p>
    <p class="text-gray-500 text-base mb-2">
      Currently working <span class="underline">part-time</span> at <span class="text-blue-600 font-semibold">Purwadhika Digital Technology School</span> as a Lecturer.
    </p>
    <br />
    <div class="mb-6">
      <p class="text-gray-700 font-semibold mb-1">Projects I vibe with:</p>
      <ul class="list-disc list-inside text-gray-600 text-sm space-y-1">
        <li>
          <a
            href="https://whales.money"
            target="_blank"
            class="text-blue-600 hover:underline">Whales Money</a
          > ‚Äì DeFi made simple
        </li>
        <li>
          <a
            href="https://bondlink.finance"
            target="_blank"
            class="text-blue-600 hover:underline">Bondlink Finance</a
          > ‚Äì RWA x DeFi
        </li>
        <li>
          <a
            href="https://silensio.xyz"
            target="_blank"
            class="text-blue-600 hover:underline"
          >
            Silensio
          </a>
          ‚Äì zkSNARKs based privacy
        </li>
      </ul>
    </div>
    <div class="mb-6">
      <p class="text-gray-700 font-semibold mb-1">Stacks I work with</p>
      <p class="text-gray-600 text-sm">
        React, Next.js, Node.js, Solidity, Tailwind, PostgreSQL, Docker, Web3,
        and more.
      </p>
    </div>
    <div class="mb-6">
      <p class="text-gray-700 font-semibold mb-1">Trophies üèÜ</p>
      <ul class="list-disc list-inside text-gray-600 text-sm">
        <li>ETH Global Bangkok 2024 Blockscout Category Winner</li>
      </ul>
    </div>
    <div class="flex gap-4 mt-4">
      <a
        href="https://github.com/rezzadtyp"
        target="_blank"
        class="text-blue-600 hover:underline">GitHub</a
      >
      <a
        href="https://www.linkedin.com/in/rezzadtyp"
        target="_blank"
        class="text-blue-600 hover:underline">LinkedIn</a
      >
      <a
        href="https://t.me/oiia99x"
        target="_blank"
        class="text-blue-600 hover:underline">Telegram</a
      >
    </div>
    <button
      id="play-video-btn"
      class="mt-6 px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 transition-colors cursor-pointer"
    >
      wanna see something cool? üëÄ
    </button>
  </div>
  
  <!-- Floating Video Player -->
  <div id="video-container" class="video-container hidden">
    <video
      id="floating-video"
      src="/subway_surfer.mp4"
      class="video-player"
      loop
    ></video>
    <button
      id="close-video-btn"
      class="close-video-btn"
      aria-label="Close video"
    >
      √ó
    </button>
  </div>

  <style>
    .video-container {
      position: fixed;
      z-index: 1000;
      /* Desktop: left side */
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      width: 300px;
      max-width: calc(100vw - 40px);
    }

    .video-player {
      width: 100%;
      height: auto;
      border-radius: 0px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      background: #000;
    }

    .close-video-btn {
      position: absolute;
      top: -15px;
      right: -15px;
      width: 32px;
      height: 32px;
      border-radius: 0%;
      background: #ef4444;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      transition: background 0.2s;
    }

    .close-video-btn:hover {
      background: #dc2626;
    }

    /* Mobile: bottom of screen */
    @media (max-width: 768px) {
      .video-container {
        left: 0;
        right: 0;
        top: auto;
        bottom: 0;
        transform: none;
        width: 100%;
        max-width: 100vw;
        padding: 0 10px 10px 10px;
      }

      .video-player {
        max-height: 50svh;
      }

      /* When video is visible, make main content scrollable with max-height */
      #main-content.video-visible {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        max-height: 50svh;
        overflow-y: auto;
        justify-content: flex-start;
        padding-top: 20px;
        padding-bottom: 20px;
        z-index: 1;
      }

      /* When video is visible, constrain text content height */
      #main-content.video-visible #text-content {
        max-height: 50svh;
        overflow-y: auto;
      }

      .video-container {
        z-index: 1000;
      }
    }
  </style>

  <script>
    // Simple local time display
    function updateTime() {
      const el = document.getElementById("local-time");
      if (el) {
        const now = new Date();
        el.textContent = now.toLocaleTimeString("en-US", { hour12: false });
      }
    }

    // Video player state
    const videoState = {
      isPlaying: false,
      isVisible: false,
    };

    // Video player functionality
    function initVideoPlayer() {
      const playBtn = document.getElementById("play-video-btn");
      const videoContainer = document.getElementById("video-container");
      const video = document.getElementById("floating-video") as HTMLVideoElement;
      const closeBtn = document.getElementById("close-video-btn");
      const mainContent = document.getElementById("main-content");

      if (!playBtn || !videoContainer || !video || !closeBtn || !mainContent) return;

      // Update state when video plays
      video.addEventListener("play", () => {
        videoState.isPlaying = true;
        console.log("Video state: playing", videoState);
      });

      // Update state when video pauses
      video.addEventListener("pause", () => {
        videoState.isPlaying = false;
        console.log("Video state: paused", videoState);
      });

      // Update state when video ends
      video.addEventListener("ended", () => {
        videoState.isPlaying = false;
        console.log("Video state: ended", videoState);
      });

      const showVideo = () => {
        videoContainer.classList.remove("hidden");
        mainContent.classList.add("video-visible");
        videoState.isVisible = true;
        video.play().catch((err: Error) => {
          console.error("Error playing video:", err);
          videoState.isPlaying = false;
        });
      };

      const hideVideo = () => {
        video.pause();
        videoContainer.classList.add("hidden");
        mainContent.classList.remove("video-visible");
        videoState.isVisible = false;
        videoState.isPlaying = false;
      };

      playBtn.addEventListener("click", showVideo);

      closeBtn.addEventListener("click", hideVideo);

      // Close video when clicking outside (optional)
      videoContainer.addEventListener("click", (e) => {
        if (e.target === videoContainer) {
          hideVideo();
        }
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      updateTime();
      setInterval(updateTime, 1000);
      initVideoPlayer();
    });
  </script>
</main>
